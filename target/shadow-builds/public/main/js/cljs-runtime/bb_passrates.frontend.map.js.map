{"version":3,"sources":["bb_passrates/frontend/map.cljs"],"mappings":";AAEA,oCAAA,pCAAMA;AAAN,AACE,IAAMC,KAAG,uBAAA,vBAAgBC;AAAzB,AACE,oBAAMD;AAAN,AACE,IAAAE,aAAA,mFACO,AAACI,WAAc,AAAA,AAAA,AAAAN,yBACf,AAACM,WAAc,AAAA,AAAA,AAAAN;iBAFtB,AAAAG,4CAAAD,WAAA,IAAA,xEAAOE;kBAAP,AAAAD,4CAAAD,WAAA,IAAA,zEAAkBG;IAGZE,MAAI,sDAAA,tDAAU,MAAA,NAAMC,qBAAY,AAAUA,SAAKJ,WAAWC;kBAHhE,dAIMI;kBAJN,dAKMC;AALN,AAME,AAAQ,AAAYF,YAAKC,YAAY,qBAAA,2CAAA,hEAACE,mIAAsBD,4BAAeH;;kBACvE,0BAAA,1BAAmBN,XAAuBW,PAC1C,OAAA,yDAAU,WAAKZ;AAAL,AACE,IAAMa,MAAI,AAACP,WAAc,AAAA,AAAA,AAAAN;IACnBc,QAAK,AAACR,WAAc,AAAA,AAAA,AAAAN;AAD1B,AAEE,OAAQ,AAASQ,SAAK,AAAUA,SAAKK,IAAIC,cAAOP;;;AAZtE","names":["bb-passrates.frontend.map/set-map","el","js/document","vec__28538","cljs.core.nth","lat-centre","long-centre","js/parseFloat","map","js/L","tile-server","attribution","cljs.core/clj->js","js/Array.from","lat","long"],"sourcesContent":["(ns bb-passrates.frontend.map)\n\n(defn set-map []\n  (let [el (.querySelector js/document \"#map\")]\n    (when el\n      (let [[lat-centre long-centre]\n            [(js/parseFloat el.attributes.lat.value)\n             (js/parseFloat el.attributes.long.value)]\n            map (.setView (.map js/L \"map\") (.latLng  js/L lat-centre long-centre) 13)\n            tile-server \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            attribution \"&copy; <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"]\n        (.addTo (.tileLayer js/L tile-server (clj->js {:attribution attribution})) map)\n        (-> (.querySelectorAll js/document \".school\") js/Array.from\n            (.forEach (fn [el]\n                        (let [lat (js/parseFloat el.attributes.lat.value)\n                              long (js/parseFloat el.attributes.long.value)]\n                          (.addTo (.marker js/L (.latLng  js/L lat long)) map)))))))))\n"]}