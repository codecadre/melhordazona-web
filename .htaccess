AddHandler cgi-script .clj
DirectoryIndex index.clj index.html
RewriteEngine On
Options -Indexes
PassEnv ENV

RewriteRule ^favicon.ico public/img/favicon.ico [L]

# send everything to /index.clj minus files and directories
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.clj [L]

RewriteCond %{REQUEST_URI} "/en/"
RewriteRule ^ /index.clj [L]

RewriteRule ^/?bb.edn$ - [F,L]
RewriteRule ^/?.gitignore$ - [F,L]
RewriteRule ^/?.gitmodules$ - [F,L]
RewriteRule ^/?.htaccess$ - [F,L]
RewriteRule ^/?.nrepl-port$ - [F,L]
RewriteRule ^/?package.json$ - [F,L]
RewriteRule ^/?package-lock.json$ - [F,L]
RewriteRule ^/?Readme.org$ - [F,L]
RewriteRule ^/?shadow-cljs.edn$ - [F,L]
RewriteRule ^/?user.clj$ - [F,L]


#RewriteCond %{REQUEST_URI} /(.+)$
#RewriteRule ^(.+)$ %{SERVER_PROTOCOL}://%{HTTP_HOST}/$1/ [R=301,L]

# based on
# https://www.danielmorell.com/guides/htaccess-seo/redirects/https-www-and-trailing-slash

# Remove trailing slash from non-filepath urls
#RewriteCond %{REQUEST_URI} /(.+)/$
#RewriteCond %{REQUEST_FILENAME} !-d
#<If "%{HTTP_HOST} == 'locahost'">
#RewriteRule ^ %{SERVER_PROTOCOL}://%{HTTP_HOST}/%1 [R=301,L]
#</If>

# Include trailing slash on directory
#RewriteCond %{REQUEST_URI} /(.+)/$
#RewriteCond %{REQUEST_FILENAME} -d
#<If "%{HTTP_HOST} == 'locahost'">
#RewriteRule ^(.+)$ %{SERVER_PROTOCOL}://%{HTTP_HOST}/$1/ [R=301,L]
#</If>
    # Force HTTPS and WWW
    #RewriteCond %{HTTP_HOST} !^www\.(.*)$ [OR,NC]
    #RewriteCond %{https} off
    #RewriteRule ^(.*)$ http://localhost/$1 [R=301,L]
